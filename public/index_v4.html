<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antigravity V4.2 Stable</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style_v4.css?v=20260222_2">
</head>

<body>
    <header class="header">
        <h1 id="mainTitle"
            onclick="event.stopPropagation(); event.preventDefault(); if(window.openSlotManager) window.openSlotManager();"
            style="cursor: pointer;">Port
            9000</h1>
        <div class="header-controls">
            <button class="icon-btn" id="newChatBtn" title="New Chat">+</button>
            <button class="icon-btn" id="historyBtn" title="Chat History">
                <svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
            </button>
            <button class="refresh-btn" id="refreshBtn">Refresh</button>
            <div class="status-badge">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Connecting...</span>
            </div>
        </div>
    </header>

    <div class="settings-bar">
        <div class="setting-chip" id="currentModelBadge"
            onclick="if(window.openModelSelector) window.openModelSelector();"
            style="cursor: pointer; border-color: rgba(99,179,237,0.4); background: rgba(99,179,237,0.1);">
            <span id="activeModelText"
                style="pointer-events: none; font-size: 10px; color: #63b3ed; font-weight: 600;">--</span>
        </div>
        <div class="setting-chip" id="modelBtn" onclick="if(window.openModelSelector) window.openModelSelector();"
            style="cursor: pointer;"><span id="modelText">Unknown</span></div>
        <div class="setting-chip" onclick="if(window.openModeSelector) window.openModeSelector();"
            style="cursor: pointer;"><span id="modeText">Unknown</span></div>
        <div class="setting-chip" style="display: none;"><span id="instanceText">Port 9000</span></div>
    </div>

    <div class="chat-container" id="chatContainer">
        <div class="chat-content" id="chatContent">
            <div class="loading-state">
                <div class="loading-spinner"></div>
                <p>Waiting for V4.2 snapshot...</p>
            </div>
        </div>
    </div>

    <button class="fab" id="scrollToBottom">â†“</button>

    <div class="input-section">
        <div class="input-wrapper">
            <input type="file" id="imageInput" accept="image/*" title="Upload Image">
            <label for="imageInput" class="attach-btn" id="attachBtn">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <circle cx="8.5" cy="8.5" r="1.5" />
                    <polyline points="21 15 16 10 5 21" />
                </svg>
            </label>
            <textarea id="messageInput" placeholder="Message V4.2..."></textarea>
            <button class="send-btn" id="sendBtn">Send</button>
        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-panel">
            <div id="modalList"></div>
            <button class="modal-close-btn"
                onclick="document.getElementById('modalOverlay').style.display='none'">Close</button>
        </div>
    </div>

    <script src="js/app_v4.js?v=20260222_8"></script>
</body>

</html>